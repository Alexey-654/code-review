# Code Review by Nosenko Alexey
Для полного погружения нехватает нэймспэйсов.
Классы и интерфейсы не должны быть в одном файле.
Название файла должно совпадать с названием класса или интерфейса.

## Интерфейс
Именование должно следовать стандартам PSR-4 (ICart in PascalCase) иначе автозагрузка может пострадать.
В целом не понятно что значит i в названии, если это interface, то названия CartInterface будет более подходящим.
Методам не хватет как минимум type-hint входящих и исходящих параметров. А еще лучше PHPDoc с описанием.
Методы выполняют слишком разные по смыслу действия. Тут на помощь приходит Interface segregation principle из SOLID.
Дефолтное значение в методе makeOrder() нарушает смысл интерфейса, перенести его в метод класса.

## Класс
Название класса я бы переименовал в более очевидное UserShopingCart.
Названия свойств слишком общие. Можно не $items a $goods или $products.
Свойство $order и методы которые его затрагивают отправить в класс Order.
В целом тут не хватает методов для полноценной реализации корзины addProduct(), removeProduct(), getListOfProduct() and so on.
Нехватает свойства $userId, с передачай его через конструктор.

### Конструктор
НЛО прилетело и украло конструктор.

### calcVat()
Метод рассчета НДС судя по названию. Основная ставка налога уже давно 20%, а не 18%. И я бы не делал константу, т.к. ситуация в стране динамичная))
И в целом у НДС есть разные ставки(0, 10%, 20%), а небольшие магазины вообще не начисляют НДС, поэтому стоит передавать ставку через аргумент метода.
Cтоит учесть, что кол-во товара может быть > 1, поэтому наверянка должен быть гетер кол-ва.

```PHP
public function calcVat($taxRate = 0.20)
{
    $vat = 0;
    foreach ($this->items as $item) {
        $vat += $item->getPrice() * $item->getQnt() * $taxRate;
    }
    return $vat;
}
```

### notify()
Метод вызывает метод sendMail() и создан только чтобы реализовать интерфейс. Возвращаемся к вопросу разделения интерфейса и уместности этого метода в данном классе.

### sendMail()
Переменные из одной буквы увеличивают когнитивную нагрузку, это плохо сказывается на производительности коллег которые будут читать код.
Метод getPrice() судя по рассчетам возращает цену без НДС, поэтому я бы явно указал в названии метода что цена без НДС getPriceWithoutVAT(), чтобы не перепутать в один прекрасный момент.
Mailer class не очень понятно как устроен и что за параметры он принимает, их лучше вынести в аргументы метода, чтобы по меньше Magic Strings было.
В YII и Laravel mailer конфигурируется при запуске, и доступен через методы класса без создания объектов. Думаю этой практики стоит придерживаться.
В целом письмо которое получат менеджеры не информативно.
Формирование html сообщения неудачно подобрано, из-за этого лишний пробел перед финальной точкой.
Так будет визуально проще -
```php
"<p><b>{$this->order->id()} </b>$p.</p>"
```

### makeOrder()
Дефолтное значение из интерфейса перенести в этот метод.
Если методы оставлять как есть, то часть дублирующегося кода здесь и в sendMail(), можно выделить в отдельную функцию с private модификатором getTotalValue()
Но в целом вспоминаем DIP from SOLID и этот метод лучше реализовать в классе Order. Из класса Cart нам нужно получить список товаров и передать его в конструктор или метод-фабрику класса Order.

Спасибо за внимание.